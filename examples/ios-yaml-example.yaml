# iOS automation with YAML script example
# This example shows how to automate iOS devices using PyAutoGUI server

ios:
  # PyAutoGUI server configuration
  serverUrl: "http://localhost:1412"
  
  # Auto dismiss keyboard after input (optional)
  autoDismissKeyboard: true
  
  # iOS device mirroring configuration for precise location targeting
  # These values define the position and size of the mirrored device screen
  mirrorConfig:
    mirrorX: 692      # X position of iOS mirror on computer screen
    mirrorY: 161      # Y position of iOS mirror on computer screen  
    mirrorWidth: 344  # Width of the mirrored iOS screen
    mirrorHeight: 764 # Height of the mirrored iOS screen (iPhone 11 Pro size)
  
  # Output file for aiQuery/aiAssert results (optional)
  output: "./results.json"

tasks:
  - name: Open Safari and search
    flow:
      - aiAction: "Open Safari browser"
      - sleep: 2000
      - aiAction: "Navigate to google.com"  
      - sleep: 3000
      - aiAction: "Type 'iOS automation' in the search box"
      - aiAction: "Tap the search button"
      - sleep: 5000
      - aiAssert: "Search results are displayed"
      
  - name: Extract search results
    flow:
      - aiQuery: >
          {title: string, description: string}[], 
          return the titles and descriptions of the first 3 search results
        name: search_results
        
  - name: Navigate to settings
    flow:
      - aiAction: "Open Settings app"
      - sleep: 2000
      - aiAction: "Scroll down to find General settings"
      - aiAction: "Tap on General"
      - sleep: 1000
      - aiAssert: "General settings page is displayed"
      
  - name: Test iOS input functionality
    flow:
      - aiAction: "Open Notes app"
      - sleep: 2000
      - aiAction: "Tap on new note button or create new note"
      - sleep: 1000
      - aiInput: "This is a test note created with iOS automation. The input should work properly with character-by-character typing and keyboard dismissal."
      - sleep: 1000
      - aiAction: "Save the note"
      - aiAssert: "Note is saved successfully"
      
  - name: Test iOS search input
    flow:
      - aiAction: "Go to iOS home screen"
      - sleep: 1000
      - aiAction: "Swipe down to open search"
      - sleep: 1000
      - aiInput: "Settings"
      - sleep: 2000
      - aiAction: "Tap on Settings in search results"
      - aiAssert: "Settings app is opened"
